<!doctype html>

<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Arriab Store — Admin Edit</title>
</head>
<body>
  <h1>Arriab Store — Admin Edit</h1>
  <p>Halaman ini butuh password: Abimanyu1234</p>
  <div id="editorArea" style="display:none"></div>  <script>
    const ADMIN_PASSWORD = 'Abimanyu1234';
    const DEFAULT_STOCK = [
      {id:'A', name:'Redfinger Android 12 - 7 Day', qty: 7},
      {id:'B', name:'Redfinger Android 12 - 30 Day', qty: 3}
    ];

    function loadStock(){
      try{ const raw = localStorage.getItem('arriab_stock'); if(!raw) return JSON.parse(JSON.stringify(DEFAULT_STOCK)); return JSON.parse(raw);}catch(e){return JSON.parse(JSON.stringify(DEFAULT_STOCK));}
    }

    function saveStock(arr){ localStorage.setItem('arriab_stock',JSON.stringify(arr)); }

    function requireAuth(){
      const pw = prompt('Enter admin password:');
      if(pw === ADMIN_PASSWORD){
        document.getElementById('editorArea').style.display='block';
        renderEditor();
      } else { alert('Wrong password. Access denied.'); }
    }

    function renderEditor(){
      const arr = loadStock();
      const container = document.getElementById('editorArea');
      container.innerHTML='';
      arr.forEach((it,idx)=>{
        const div = document.createElement('div');
        div.innerHTML=`ID:${it.id} Name:<input data-idx='${idx}' data-field='name' value='${it.name}'> Qty:<input data-idx='${idx}' data-field='qty' type='number' value='${it.qty}'> <button data-idx='${idx}'>Remove</button>`;
        container.appendChild(div);
      });

      container.querySelectorAll('input').forEach(inp=>{
        inp.addEventListener('change',()=>{
          const idx=Number(inp.dataset.idx),field=inp.dataset.field;
          const arr2=loadStock();
          arr2[idx][field]=(field==='qty'?Number(inp.value):inp.value);
          saveStock(arr2);
        });
      });

      container.querySelectorAll('button').forEach(btn=>{
        btn.addEventListener('click',()=>{
          const idx=Number(btn.dataset.idx);
          const arr2=loadStock();
          arr2.splice(idx,1);
          saveStock(arr2);
          renderEditor();
        });
      });

      const addBtn=document.createElement('button'); addBtn.textContent='Add Item';
      addBtn.addEventListener('click',()=>{
        const arr2=loadStock(); arr2.push({id:Math.random().toString(36).slice(2,7).toUpperCase(),name:'New Item',qty:0}); saveStock(arr2); renderEditor();
      });
      container.appendChild(addBtn);
    }

    requireAuth();
  </script></body>
</html>
